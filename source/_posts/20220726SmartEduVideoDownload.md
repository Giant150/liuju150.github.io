---
layout: post
title: '国家中小学智慧教育平台视频课程下载'
subtitle: '批量下载课程视频'
tags:
  - 随笔
date: 2022-07-26 10:07:53
---

## GitHub 地址

https://github.com/LiuJu150/smartedu

## 前言

最近家里有一台10年前的老电视机，因为不能连接无线网络。
家里也没有用有线电视机顶盒了。只能播放一些本地视频了。
再加上小孩子现在正在放暑假，所以想搞些学习视频给他看一下。
正好有国家中小学智慧教育平台，里面的同步课程视频都是可以免费看的。
所以我打算把他全部下载到U盘里在电视机上播放。
![](https://img2022.cnblogs.com/blog/45026/202208/45026-20220805173124325-450751653.png)
## 开始

一个学期一门课程的同步课程视频大约有50~80个视频，如果一个个下载的话。没个半天是搞不完的。
但是一个学期不只有一门课，就算只下语文数学的话，那一天时间就全完在这上面了。
这到还不是重点，重点是一天都在做重复的劳动
打开一个课程，然后找到视频下载地址，然后用下载工具把视频下载下来。
重复这个动作大约百来次，每次要等个几分钟下载。
做为一般人的我,也接受不了.
所以还是不得已求助了万能的朋友圈
![](https://img2022.cnblogs.com/blog/45026/202208/45026-20220805173131801-97110233.png)

## 找到工具

通过万的朋友圈发现了一个好用的工具
是在全球最大的男同志平台GitHub上有类似的工具
这个工具是可以把m3u8视频分片地址排量下载，合并成mp4的工具
这样我们就只要找到所有的视频m3u8地址
然后通过此工具批量下载功能，就可以把所有的视频下载出来
m3u8视频下载工具地址为
https://github.com/nilaoda/N_m3u8DL-CLI
已经有9K多个Star了，说得上是全网最火的m3u8视频下载工具了
![](https://img2022.cnblogs.com/blog/45026/202209/45026-20220901152513487-1537316957.png)

## 测试下载

有了这个工具，我们就只要找到所有视频的m3u8地址
然后写个排量下载的脚本，这样就可以把所有的视频下载出来
![](https://img2022.cnblogs.com/blog/45026/202209/45026-20220901152717864-174204606.png)

m3u8文件并不是真正的视频文件，他只是视频分片的一个索引文件
要通过把索引内容一个个下载出来，合并才能真正成为一个视频
![](https://img2022.cnblogs.com/blog/45026/202209/45026-20220901154336070-1259983735.png)

但是N_m3u8DL-CLI这个工具有些小的问题，
就是这个工具是用.net framework4.6版本开发出来的
但对于一些老的Win7系统是不支持的
因为Win7系统一般只支持.net framework3.5版本
正好看到N_m3u8DL-CLI的作者说明

N_m3u8DL-CLI (本项目): 基于 .NET Framework, 不具备跨平台能力. 目前已进入维护阶段.
N_m3u8DL-RE : 抛弃历史包袱从零做起, 支持Win/Linux/Mac, 更丰富的功能会在这里出现 ...

作者重构了一个新版本，支持Win/Linux/Mac,当然也包括我们的Win7

工具下载地址：https://github.com/nilaoda/N_m3u8DL-RE

所以通过此工具，我们只要把所有视频地址找出来
然后通过N_m3u8DL-RE工具就可以把所有视频下载了。
我们可以写一个视频地址分析脚本，网上也有对应的视频地址嗅探工具
可以很方便的把所有地址嗅探出来

原来是把视频地址嗅探出来后，通过IDM工具可以一个个下载
虽然方便，但也是要花很多时间去嗅探

所以网上又有大神通过对应的接口
可以把一门课程的视频地址都分析出来

这样我们就可以通过N_m3u8DL-RE工具把所有视频下载出来了
![](https://img2022.cnblogs.com/blog/45026/202209/45026-20220901153535878-1019721499.png)

## 最后

当然说在最后N_m3u8DL-CLI，N_m3u8DL-RE工具只是帮我们分析m3u8地址
然后把所有视频的分片下载下来
真正把分片合并完成mp4视频的事情还是得用ffmpeg这个大名鼎鼎的视频处理工具了
所以这也是为什么不管N_m3u8DL-CLI，N_m3u8DL-RE代码多好
但是真正生成执行文件后，还是要把ffmpeg.exe放到同一目录才能正常工作的原因

![智慧教育](0.png)
